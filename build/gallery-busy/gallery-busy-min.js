YUI.add("gallery-busy",function(b){function a(c){a.superclass.constructor.apply(this,arguments);}a.NAME="Busy";a.NS="busy";a.ATTRS={container:{value:null,setter:b.one},selector:{value:null,validator:b.Lang.isString},globalNode:{value:null,setter:b.Node},css:{value:"yui3-gallery-busy",validator:b.Lang.isString}};b.extend(a,b.Base,{initializer:function(c){this.o=b.Node.create('<div style="position:absolute;display:none;visibility:hidden;"></div>');this.o.set("className",this.get("css"));b.one("body").prepend(this.o);b.delegate("click",function(f){if(this.isVisible()){this.hide();}var d=f.currentTarget.getData("busy");this.setVisible(d&&!b.Lang.isObject(d)?b.one(d):null,true);},c.container,c.selector,this);b.Global.on("msa-busy:show",function(d){this.show(d&&d.node);},this);b.Global.on("msa-busy:hide",this.hide,this);this.on("cssChange",function(d){this.o.set("className",d.newVal);});},destructor:function(){this.o.remove(true);this.set("globalNode",null);},isVisible:function(){return(this.o.getStyle("visibility")!="hidden");},show:function(c){this.setVisible(c,true);},hide:function(){this.setVisible(null,false);},setVisible:function(c,d){var c=c||this.get("globalNode");this.target_region=null;this.o.setStyle("display",(d?"":"none"));if(c&&d){this.resizeOverlay(c);}this.o.setStyle("visibility",(d?"":"hidden"));if(c&&d){if(!this.timer){this.timer=b.later(500,this,this.resizeOverlay,c,true);}b.one("body").addClass("yui3-busyoverlay-browser-hacks");}else{if(this.timer){this.timer.cancel();this.timer=null;}b.one("body").removeClass("yui3-busyoverlay-browser-hacks");}},resizeOverlay:function(d){var c=d.get("region");if(c&&(!this.target_region||c.top!==this.target_region.top||c.bottom!==this.target_region.bottom||c.left!==this.target_region.left||c.right!==this.target_region.right)){this.target_region=c;this.o.setXY([c.left,c.top]);this.o.setStyle("width",c.width+"px");this.o.setStyle("height",c.height+"px");}}});b.namespace("MSA");b.MSA.Busy=a;},"gallery-2012.11.07-21-32",{requires:["base","node-base","node-style","event-tap","event-delegate","node-screen"],skinnable:true});